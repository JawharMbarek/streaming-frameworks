
\documentclass[11pt, a4paper]{book}

\usepackage{tikz}
\usetikzlibrary{external}
\tikzexternalize[optimize=false] 
\tikzsetexternalprefix{plots/}
\tikzset{external/force remake=true}
\usepackage{pgfplots,siunitx}
\pgfplotsset{width=\textwidth, height = 0.4\textheight,
compat=newest, minor tick style={black}, legend style={cells={anchor=west}},every axis legend/.append style={at={(0.99,0.02)},anchor=south east}, ticklabel shift={0.05cm}}
\usepgfplotslibrary{units}






\begin{document}


%STORM TRHOUGHPUT%
\tikzsetnextfilename{messungStormDurchsatz}
\begin{tikzpicture} 
\begin{axis}[ enlarge x limits=0.03, 
							%title=Messung,
							xlabel=$t$ in Sekunden,
							ylabel=Anzahl Nachrichten,
							axis x line=bottom,
							axis y line=left,
							ymin=0,
							ymax=1200000,
							width=1\linewidth,
							height=10cm,
							yticklabel style={anchor=east, /pgf/number format/precision=3, /pgf/number format/fixed, /pgf/number format/fixed zerofill},
							yticklabel shift=2pt,
							legend entries = {Storm HiSta, Storm HiDyn, Storm LoSta, Storm LoDyn},
							legend style={at={(1,1)},xshift=0.2cm, nodes=right},
							legend pos=outer north east] 
%nur punkte
%\addplot+[only marks, color=blue, mark options={scale=0.08}, mark=*] table [x=Time, y=Mps, col sep=comma,trim cells=true] {anhangMessung/traversedMeasure.log};
%verbundene Punkte
\addplot+[mark options={scale=0.07}, color=blue] table [x=Time, y=Mps, col sep=comma,trim cells=true] {anhangMessung/measureStormHighPcRaw.dat};
\addplot+[mark options={scale=0.07}, color=red] table [x=Time, y=Mps, col sep=comma,trim cells=true] {anhangMessung/measureStormHighPcWordCount.dat};
\addplot+[mark options={scale=0.07}, color=orange] table [x=Time, y=Mps, col sep=comma,trim cells=true] {anhangMessung/measureStormLowPcRaw.dat};
\addplot+[mark options={scale=0.07}, color=green] table [x=Time, y=Mps, col sep=comma,trim cells=true] {anhangMessung/measureStormLowPcWordCount.dat};
\end{axis} 
\end{tikzpicture}


%STORM CPU%
\tikzsetnextfilename{messungStormCpu}
\begin{tikzpicture} 
\begin{axis}[ enlarge x limits=0.03,
							xlabel=$t$ in Sekunden,
							ylabel=CPU Auslastung in Prozent,							
							axis x line=bottom,
							axis y line=left,
							ymin=0,
							ymax=1.0,							
							width=1\linewidth,
							height=10cm,
							yticklabel shift=-1pt,
							legend entries = {Storm HiSta, Storm HiDyn, Storm LoSta, Storm LoDyn},
							legend style={at={(1,1)},xshift=0.2cm,nodes=right},
							legend pos=outer north east,
							yticklabel={\pgfmathparse{\tick*100}\pgfmathprintnumber{\pgfmathresult}\%},] 
%nur punkte
%\addplot+[only marks, color=blue, mark options={scale=0.08}, mark=*] table [x=Time, y=Mps, col sep=comma,trim cells=true] {anhangMessung/traversedMeasure.log};
%verbundene Punkte
\addplot+[mark options={scale=0.07}, color=blue] table [x=Time, y=SystemCpu, col sep=comma,trim cells=true] {anhangMessung/measureStormHighPcRaw.dat};
\addplot+[mark options={scale=0.07}, color=red] table [x=Time, y=SystemCpu, col sep=comma,trim cells=true] {anhangMessung/measureStormHighPcWordCount.dat};
\addplot+[mark options={scale=0.07}, color=orange] table [x=Time, y=SystemCpu, col sep=comma,trim cells=true] {anhangMessung/measureStormLowPcRaw.dat};
\addplot+[mark options={scale=0.07}, color=green] table [x=Time, y=SystemCpu, col sep=comma,trim cells=true] {anhangMessung/measureStormLowPcWordCount.dat};
\end{axis} 
\end{tikzpicture}


%KAFKA TRHOUGHPUT%
\tikzsetnextfilename{messungKafkaDurchsatz}
\begin{tikzpicture}
\begin{axis}[ enlarge x limits=0.03, 
							%title=Messung,
							xlabel=$t$ in Sekunden,
							ylabel=Anzahl Nachrichten,
							axis x line=bottom,
							axis y line=left,
							ymin=0,
							ymax=160000,
							width=1\linewidth,
							height=10cm,
							yticklabel style={anchor=east, /pgf/number format/precision=3, /pgf/number format/fixed, /pgf/number format/fixed zerofill},
							yticklabel shift=2pt,							
							legend entries = {Kafka HiSta, Kafka HiDyn, Kafka LoSta, Kafka LoDyn},
							legend style={at={(1,1)},xshift=0.2cm,nodes=right},
							legend pos=outer north east] 
%nur punkte
%\addplot+[only marks, color=blue, mark options={scale=0.08}, mark=*] table [x=Time, y=Mps, col sep=comma,trim cells=true] {anhangMessung/traversedMeasure.log};
%verbundene Punkte
\addplot+[mark options={scale=0.07}, color=blue] table [x=Time, y=Mps, col sep=comma,trim cells=true] {anhangMessung/measureKafkaHighPcRaw.dat};
\addplot+[mark options={scale=0.07}, color=red] table [x=Time, y=Mps, col sep=comma,trim cells=true] {anhangMessung/measureKafkaHighPcWordCount.dat};
\addplot+[mark options={scale=0.07}, color=orange] table [x=Time, y=Mps, col sep=comma,trim cells=true] {anhangMessung/measureKafkaLowPcRaw.dat};
\addplot+[mark options={scale=0.07}, color=green] table [x=Time, y=Mps, col sep=comma,trim cells=true] {anhangMessung/measureKafkaLowPcWordCount.dat};
\end{axis} 
\end{tikzpicture}


%KAFKA CPU%
\tikzsetnextfilename{messungKafkaCpu}
\begin{tikzpicture} 
\begin{axis}[ enlarge x limits=0.03, 
							%title=Messung,
							xlabel=$t$ in Sekunden,
							ylabel=CPU Auslastung in Prozent,
							axis x line=bottom,
							axis y line=left,
							ymin=0,
							ymax=1.0,
							width=1\linewidth,
							height=10cm,							
							yticklabel shift=-1pt,
							legend entries = {Kafka HiSta, Kafka HiDyn, Kafka LoSta, Kafka LoDyn},
							legend style={at={(1,1)},xshift=0.2cm,nodes=right},
							legend pos=outer north east,
							yticklabel={\pgfmathparse{\tick*100}\pgfmathprintnumber{\pgfmathresult}\%},] 
%nur punkte
%\addplot+[only marks, color=blue, mark options={scale=0.08}, mark=*] table [x=Time, y=Mps, col sep=comma,trim cells=true] {anhangMessung/traversedMeasure.log};
%verbundene Punkte
\addplot+[mark options={scale=0.07}, color=blue] table [x=Time, y=SystemCpu, col sep=comma,trim cells=true] {anhangMessung/measureKafkaHighPcRaw.dat};
\addplot+[mark options={scale=0.07}, color=red] table [x=Time, y=SystemCpu, col sep=comma,trim cells=true] {anhangMessung/measureKafkaHighPcWordCount.dat};
\addplot+[mark options={scale=0.07}, color=orange] table [x=Time, y=SystemCpu, col sep=comma,trim cells=true] {anhangMessung/measureKafkaLowPcRaw.dat};
\addplot+[mark options={scale=0.07}, color=green] table [x=Time, y=SystemCpu, col sep=comma,trim cells=true] {anhangMessung/measureKafkaLowPcWordCount.dat};
\end{axis} 
\end{tikzpicture}


%FLUME TRHOUGHPUT%
\tikzsetnextfilename{messungFlumeDurchsatz}
\begin{tikzpicture} 
\begin{axis}[ enlarge x limits=0.03, 
							%title=Messung,
							xlabel=$t$ in Sekunden,
							ylabel=Anzahl Nachrichten,
							axis x line=bottom,
							axis y line=left,
							ymin=0,
							ymax=160000,
							width=1\linewidth,
							height=10cm,
yticklabel style={anchor=east, /pgf/number format/precision=3, /pgf/number format/fixed, /pgf/number format/fixed zerofill},
							yticklabel shift=2pt,							
							legend entries = {Flume HiSta, Flume HiDyn, Flume LoSta, Flume LoDyn},
							legend style={at={(1,1)},xshift=0.2cm,nodes=right},
							legend pos=outer north east] 
%nur punkte
%\addplot+[only marks, color=blue, mark options={scale=0.08}, mark=*] table [x=Time, y=Mps, col sep=comma,trim cells=true] {anhangMessung/traversedMeasure.log};
%verbundene Punkte
\addplot+[mark options={scale=0.07}, color=blue] table [x=Time, y=Mps, col sep=comma,trim cells=true] {anhangMessung/measureFlumeHighPcRaw.dat};
\addplot+[mark options={scale=0.07}, color=red] table [x=Time, y=Mps, col sep=comma,trim cells=true] {anhangMessung/measureFlumeHighPcWordCount.dat};
\addplot+[mark options={scale=0.07}, color=orange] table [x=Time, y=Mps, col sep=comma,trim cells=true] {anhangMessung/measureFlumeLowPcRaw.dat};
\addplot+[mark options={scale=0.07}, color=green] table [x=Time, y=Mps, col sep=comma,trim cells=true] {anhangMessung/measureFlumeLowPcWordCount.dat};
\end{axis} 
\end{tikzpicture}



%FLUME CPU%
\tikzsetnextfilename{messungFlumeCpu}
\begin{tikzpicture} 
\begin{axis}[ enlarge x limits=0.03, 
							%title=Messung,
							xlabel=$t$ in Sekunden,
							ylabel=CPU Auslastung in Prozent,
							axis x line=bottom,
							axis y line=left,
							ymin=0,
							ymax=1.0,
							width=1\linewidth,
							height=10cm,
							yticklabel shift=-1pt,
							legend entries = {Flume HiSta, Flume HiDyn, Flume LoSta, Flume LoDyn},
							legend style={at={(1,1)},xshift=0.2cm,nodes=right},
							legend pos=outer north east,
							yticklabel={\pgfmathparse{\tick*100}\pgfmathprintnumber{\pgfmathresult}\%},] 
%nur punkte
%\addplot+[only marks, color=blue, mark options={scale=0.08}, mark=*] table [x=Time, y=Mps, col sep=comma,trim cells=true] {anhangMessung/traversedMeasure.log};
%verbundene Punkte
\addplot+[mark options={scale=0.07}, color=blue] table [x=Time, y=SystemCpu, col sep=comma,trim cells=true] {anhangMessung/measureFlumeHighPcRaw.dat};
\addplot+[mark options={scale=0.07}, color=red] table [x=Time, y=SystemCpu, col sep=comma,trim cells=true] {anhangMessung/measureFlumeHighPcWordCount.dat};
\addplot+[mark options={scale=0.07}, color=orange] table [x=Time, y=SystemCpu, col sep=comma,trim cells=true] {anhangMessung/measureFlumeLowPcRaw.dat};
\addplot+[mark options={scale=0.07}, color=green] table [x=Time, y=SystemCpu, col sep=comma,trim cells=true] {anhangMessung/measureFlumeLowPcWordCount.dat};
\end{axis} 
\end{tikzpicture}




%Virtualbox RAW MEssung%
\tikzsetnextfilename{virtualBoxRaw}
\begin{tikzpicture} 
\begin{axis}[ enlarge x limits=0.03, 
							%title=Messung,
							xlabel=$t$ in Sekunden,
							ylabel=Anzahl Nachrichten,
							axis x line=bottom,
							axis y line=left,
							ymin=0,
							ymax=8000,
							width=1\linewidth,
							height=10cm,
							legend entries = {Raw VM1, Raw VM2},
							legend style={at={(1,1)},xshift=0.2cm,nodes=right},
							legend pos=outer north east, ] 

\addplot+[mark options={scale=0.07}] table [x=Time, y=Mps, col sep=comma,trim cells=true] {anhangMessung/traversedMeasureRaw.dat};
\addplot+[mark options={scale=0.07}] table [x=Time, y=Mps, col sep=comma,trim cells=true] {anhangMessung/traversedMeasureRaw2.dat};
\end{axis} 
\end{tikzpicture}


\end{document}